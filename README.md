<p align="center">
  <img src="https://nestjs.com/img/logo-small.svg" width="120" alt="Nest Logo" />
  <h1 align="center">VITA WISE AI</h1>
  <p align="center">AI-Powered Health Tracking Application Backend</p>
</p>

<p align="center">
  <a href="https://nestjs.com/" target="_blank"><img src="https://img.shields.io/badge/NestJS-8.0.0-red.svg" alt="NestJS Version" /></a>
  <a href="https://nodejs.org/" target="_blank"><img src="https://img.shields.io/badge/Node.js-18+-green.svg" alt="Node.js Version" /></a>
  <a href="https://www.typescriptlang.org/" target="_blank"><img src="https://img.shields.io/badge/TypeScript-5.0+-blue.svg" alt="TypeScript" /></a>
  <a href="https://supabase.com/" target="_blank"><img src="https://img.shields.io/badge/Supabase-Backend%20as%20Service-purple.svg" alt="Supabase" /></a>
  <a href="https://jwt.io/" target="_blank"><img src="https://img.shields.io/badge/JWT-Authentication-orange.svg" alt="JWT" /></a>
</p>

## üìã Description

**VITA WISE AI** ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡∏ö‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢ AI ‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ NestJS framework ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏à‡∏∏‡∏î‡∏°‡∏∏‡πà‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏ö‡∏ö‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞

### üöÄ Key Features

- **ü§ñ AI-Powered Health Analysis**: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏î‡πâ‡∏ß‡∏¢ OpenRouter AI
- **üìä Comprehensive Health Tracking**: ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢, ‡∏Å‡∏≤‡∏£‡∏ô‡∏≠‡∏ô, ‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥
- **üéØ Goal Management**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
- **üí¨ AI Chat Assistant**: ‡πÅ‡∏ä‡∏ó‡∏Å‡∏±‡∏ö AI ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏î‡πâ‡∏≤‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
- **üì± Real-time Notifications**: ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
- **üîê Secure Authentication**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏î‡πâ‡∏ß‡∏¢ JWT
- **üåê RESTful API**: API ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ï‡∏≤‡∏°‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô REST
- **üß† Advanced AI Integration**: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö OpenRouter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö LLM capabilities

## üèóÔ∏è Project Structure

```
src/
‚îú‚îÄ‚îÄ auth/                 # Authentication & Authorization
‚îú‚îÄ‚îÄ config/               # Configuration files
‚îú‚îÄ‚îÄ controllers/          # API Controllers
‚îÇ   ‚îú‚îÄ‚îÄ ai.controller.ts           # AI Integration APIs
‚îÇ   ‚îú‚îÄ‚îÄ ai-insight.controller.ts   # AI Insights Management
‚îÇ   ‚îú‚îÄ‚îÄ chat.controller.ts         # Chat Management
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.controller.ts    # Dashboard APIs
‚îÇ   ‚îú‚îÄ‚îÄ exercise-log.controller.ts # Exercise Logging
‚îÇ   ‚îú‚îÄ‚îÄ food-log.controller.ts     # Food Logging
‚îÇ   ‚îú‚îÄ‚îÄ health-goal.controller.ts  # Health Goals
‚îÇ   ‚îú‚îÄ‚îÄ health-metric.controller.ts # Health Metrics
‚îÇ   ‚îú‚îÄ‚îÄ notification.controller.ts  # Notifications
‚îÇ   ‚îú‚îÄ‚îÄ sleep-log.controller.ts    # Sleep Logging
‚îÇ   ‚îú‚îÄ‚îÄ user.controller.ts         # User Management
‚îÇ   ‚îú‚îÄ‚îÄ user-preference.controller.ts # User Preferences
‚îÇ   ‚îî‚îÄ‚îÄ water-log.controller.ts    # Water Logging
‚îú‚îÄ‚îÄ dto/                  # Data Transfer Objects
‚îú‚îÄ‚îÄ entities/             # Database Entities
‚îú‚îÄ‚îÄ services/             # Business Logic Services
‚îÇ   ‚îú‚îÄ‚îÄ ai.service.ts             # AI Analysis Service
‚îÇ   ‚îú‚îÄ‚îÄ chat.service.ts           # Chat Management Service
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.service.ts      # Dashboard Data Service
‚îÇ   ‚îú‚îÄ‚îÄ openrouter.service.ts     # OpenRouter AI Integration Service
‚îÇ   ‚îú‚îÄ‚îÄ supabase.service.ts       # Database Operations
‚îÇ   ‚îî‚îÄ‚îÄ user.service.ts           # User Management Service
‚îî‚îÄ‚îÄ main.ts               # Application Entry Point
```

## üóÑÔ∏è Database Schema

‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ **Supabase** ‡πÄ‡∏õ‡πá‡∏ô Backend-as-a-Service ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

- **users**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- **health_goals**: ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
- **food_log**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£
- **exercise_log**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
- **sleep_log**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏≠‡∏ô
- **water_log**: ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥
- **health_metrics**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
- **chat_sessions**: ‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó
- **chat_messages**: ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó
- **ai_insights**: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏à‡∏≤‡∏Å AI
- **notifications**: ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- **user_preferences**: ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

## üîå API Endpoints

### ü§ñ AI Integration APIs (`/api/ai`)

#### AI Data Access
- `GET /api/ai/user-profile/{user_id}` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- `GET /api/ai/health-summary/{user_id}` - ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
- `GET /api/ai/food-analysis/{user_id}` - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£
- `GET /api/ai/exercise-analysis/{user_id}` - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
- `GET /api/ai/sleep-analysis/{user_id}` - ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡∏ô‡∏≠‡∏ô
- `GET /api/ai/goals-progress/{user_id}` - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢
- `GET /api/ai/health-trends/{user_id}` - ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û

#### AI Chat
- `POST /api/ai/chat/start` - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ã‡∏™‡∏ä‡∏±‡∏ô‡πÅ‡∏ä‡∏ó‡πÉ‡∏´‡∏°‡πà
- `POST /api/ai/chat/message` - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á AI
- `GET /api/ai/chat/history/{session_id}` - ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó
- `POST /api/ai/chat/feedback` - ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏Ç‡∏≠‡∏á AI

#### AI Insights
- `POST /api/ai/analyze` - AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
- `GET /api/ai/recommendations/{user_id}` - ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏≤‡∏Å AI
- `POST /api/ai/insights/save` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡∏à‡∏≤‡∏Å AI

### üìä Core Health APIs
- `GET /api/dashboard/{user_id}` - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
- `GET /api/health-goals/{user_id}` - ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û
- `POST /api/food-log` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£
- `POST /api/exercise-log` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏≤‡∏¢
- `POST /api/sleep-log` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏≠‡∏ô
- `POST /api/water-log` - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥

## üöÄ Getting Started

### Prerequisites

**System Requirements:**
- **Operating System**: Windows 10/11, macOS 10.15+, ‡∏´‡∏£‡∏∑‡∏≠ Linux (Ubuntu 18.04+)
- **Node.js**: ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 18.0.0 ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤
- **npm**: ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 8.0.0 ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤ (‡∏°‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö Node.js)
- **Git**: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö clone repository

**External Services:**
- **Supabase Account**: ‡∏™‡∏£‡πâ‡∏≤‡∏á account ‡∏ó‡∏µ‡πà [supabase.com](https://supabase.com)
- **OpenRouter Account**: ‡∏™‡∏£‡πâ‡∏≤‡∏á account ‡∏ó‡∏µ‡πà [openrouter.ai](https://openrouter.ai) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AI API

### Installation

1. **Clone the repository**
```bash
git clone <repository-url>
cd API-PROEND
```

2. **Install Node.js Dependencies**
```bash
# Install all required packages
npm install

# ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ yarn (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
yarn install
```

3. **Required Packages ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥:**
```bash
# Core Framework
@nestjs/common @nestjs/core @nestjs/platform-express
@nestjs/config @nestjs/typeorm

# Database & ORM
@supabase/supabase-js
typeorm pg

# Authentication
jsonwebtoken @types/jsonwebtoken
bcrypt @types/bcrypt

# AI Integration
axios

# Validation & Security
class-validator class-transformer
helmet

# Development Tools
@nestjs/cli
typescript @types/node
jest @types/jest
```

4. **Environment Configuration**
‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:
```env
# Supabase Configuration
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# JWT Configuration
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRES_IN=24h

# OpenRouter Configuration
OPENROUTER_API_KEY=your_openrouter_api_key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=gpt-4o-mini  # ‡∏´‡∏£‡∏∑‡∏≠ model ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

# Application Configuration
PORT=3000
NODE_ENV=development
```

5. **Database Setup**
```sql
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á project ‡πÉ‡∏ô Supabase ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏±‡∏ô SQL schema ‡∏ô‡∏µ‡πâ:

-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
CREATE TABLE public.users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    is_active BOOLEAN DEFAULT true
);

-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ (health_goals, food_log, exercise_log, etc.)
-- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå database/schema.sql
```

6. **Supabase Project Setup**
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [supabase.com](https://supabase.com)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á project ‡πÉ‡∏´‡∏°‡πà
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Settings > API
- ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL ‡πÅ‡∏•‡∏∞ API Keys
- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏ü‡∏•‡πå `.env`

7. **OpenRouter API Setup**
- ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [openrouter.ai](https://openrouter.ai)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á account ‡πÅ‡∏•‡∏∞ API key
- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó `OPENROUTER_API_KEY` ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env`

### Running the Application

```bash
# Development mode (with hot reload)
npm run start:dev

# Production mode
npm run start:prod

# Build the application
npm run build

# Start built application
npm run start
```

### Verification Steps

1. **‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database:**
```bash
# ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API endpoint
GET http://localhost:3000/health
```

2. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö Authentication:**
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
POST http://localhost:3000/auth/register
{
  "email": "test@example.com",
  "password": "password123",
  "firstName": "‡∏ó‡∏î‡∏™‡∏≠‡∏ö",
  "lastName": "‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ"
}
```

3. **‡∏ó‡∏î‡∏™‡∏≠‡∏ö AI Integration:**
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Health Analysis
POST http://localhost:3000/ai/analyze
Authorization: Bearer <your_jwt_token>
{
  "focus_area": "overall",
  "time_period": "current"
}
```

### Troubleshooting

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢:**

1. **"fetch failed" error:**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `OPENROUTER_API_KEY` ‡πÉ‡∏ô `.env`
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï

2. **"Cannot connect to database":**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `SUPABASE_URL` ‡πÅ‡∏•‡∏∞ `SUPABASE_ANON_KEY`
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Supabase project status

3. **"Invalid token" error:**
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `JWT_SECRET` ‡πÉ‡∏ô `.env`
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö token expiration

4. **Port already in use:**
   - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `PORT` ‡πÉ‡∏ô `.env` ‡∏´‡∏£‡∏∑‡∏≠
   - ‡∏´‡∏¢‡∏∏‡∏î process ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ port 3000

### Development Tools

**‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á:**
- **Postman** ‡∏´‡∏£‡∏∑‡∏≠ **Insomnia**: ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö API
- **VS Code**: Editor ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ ‡∏û‡∏£‡πâ‡∏≠‡∏° extensions:
  - NestJS Snippets
  - TypeScript Importer
  - REST Client
- **Git GUI**: ‡πÄ‡∏ä‡πà‡∏ô SourceTree, GitKraken

## üß™ Testing

### Testing Framework

‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ **Jest** ‡πÄ‡∏õ‡πá‡∏ô testing framework ‡∏´‡∏•‡∏±‡∏Å ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ö **Supertest** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API testing

### Test Types

#### 1. **Unit Tests** (`*.spec.ts`)
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö individual functions ‡πÅ‡∏•‡∏∞ methods
- ‡πÉ‡∏ä‡πâ `@nestjs/testing` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö mocking
- ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `npm run test`

#### 2. **E2E Tests** (`*.e2e-spec.ts`)
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API endpoints ‡πÅ‡∏ö‡∏ö end-to-end
- ‡πÉ‡∏ä‡πâ `supertest` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö HTTP requests
- ‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢ `npm run test:e2e`

### Running Tests

```bash
# Unit Tests
npm run test              # ‡∏£‡∏±‡∏ô unit tests ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
npm run test:watch        # ‡∏£‡∏±‡∏ô tests ‡πÅ‡∏ö‡∏ö watch mode
npm run test:cov          # ‡∏£‡∏±‡∏ô tests ‡∏û‡∏£‡πâ‡∏≠‡∏° coverage report
npm run test:debug        # ‡∏£‡∏±‡∏ô tests ‡πÅ‡∏ö‡∏ö debug mode

# E2E Tests
npm run test:e2e          # ‡∏£‡∏±‡∏ô end-to-end tests

# All Tests
npm run test && npm run test:e2e  # ‡∏£‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á unit ‡πÅ‡∏•‡∏∞ e2e tests
```

### Test Structure

```
test/
‚îú‚îÄ‚îÄ app.e2e-spec.ts       # E2E tests ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AppController
‚îî‚îÄ‚îÄ jest-e2e.json         # Jest configuration ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö E2E tests

src/
‚îú‚îÄ‚îÄ app.controller.spec.ts # Unit tests ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö AppController
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.spec.ts
‚îÇ   ‚îî‚îÄ‚îÄ auth.service.spec.ts
‚îî‚îÄ‚îÄ services/
    ‚îú‚îÄ‚îÄ ai.service.spec.ts
    ‚îî‚îÄ‚îÄ chat.service.spec.ts
```

### Writing Unit Tests

#### Example: Service Test
```typescript
// src/services/ai.service.spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { AiService } from './ai.service';
import { OpenRouterService } from './openrouter.service';

describe('AiService', () => {
  let service: AiService;
  let openRouterService: OpenRouterService;

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      providers: [
        AiService,
        {
          provide: OpenRouterService,
          useValue: {
            analyzeHealthData: jest.fn(),
            generateRecommendations: jest.fn(),
          },
        },
      ],
    }).compile();

    service = module.get<AiService>(AiService);
    openRouterService = module.get<OpenRouterService>(OpenRouterService);
  });

  it('should be defined', () => {
    expect(service).toBeDefined();
  });

  describe('analyzeUserHealth', () => {
    it('should return health analysis', async () => {
      const mockAnalysis = '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡∏µ‡∏°‡∏≤‡∏Å';
      jest.spyOn(openRouterService, 'analyzeHealthData')
        .mockResolvedValue(mockAnalysis);

      const result = await service.analyzeUserHealth(1, 'overall');
      expect(result).toContain(mockAnalysis);
    });

    it('should use fallback when AI fails', async () => {
      jest.spyOn(openRouterService, 'analyzeHealthData')
        .mockRejectedValue(new Error('API Error'));

      const result = await service.analyzeUserHealth(1, 'overall');
      expect(result).toContain('‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢');
    });
  });
});
```

#### Example: Controller Test
```typescript
// src/controllers/ai.controller.spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { AiController } from './ai.controller';
import { AiService } from '../services/ai.service';

describe('AiController', () => {
  let controller: AiController;
  let service: AiService;

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      controllers: [AiController],
      providers: [
        {
          provide: AiService,
          useValue: {
            analyzeUserHealth: jest.fn(),
            generateAIRecommendations: jest.fn(),
          },
        },
      ],
    }).compile();

    controller = module.get<AiController>(AiController);
    service = module.get<AiService>(AiService);
  });

  it('should be defined', () => {
    expect(controller).toBeDefined();
  });

  describe('analyze', () => {
    it('should return health analysis', async () => {
      const mockResult = { analysis: '‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ' };
      jest.spyOn(service, 'analyzeUserHealth').mockResolvedValue(mockResult);

      const result = await controller.analyze(1, { focus_area: 'overall' });
      expect(result).toEqual(mockResult);
    });
  });
});
```

### Writing E2E Tests

#### Example: Authentication E2E Test
```typescript
// test/auth.e2e-spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from '../src/app.module';

describe('Authentication (e2e)', () => {
  let app: INestApplication;

  beforeEach(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    await app.init();
  });

  afterAll(async () => {
    await app.close();
  });

  describe('/auth/register (POST)', () => {
    it('should register new user', () => {
      return request(app.getHttpServer())
        .post('/auth/register')
        .send({
          email: 'test@example.com',
          password: 'password123',
          firstName: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö',
          lastName: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ'
        })
        .expect(201)
        .expect((res) => {
          expect(res.body.access_token).toBeDefined();
          expect(res.body.user.email).toBe('test@example.com');
        });
    });

    it('should reject duplicate email', () => {
      return request(app.getHttpServer())
        .post('/auth/register')
        .send({
          email: 'test@example.com',
          password: 'password123',
          firstName: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö',
          lastName: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ'
        })
        .expect(400);
    });
  });

  describe('/auth/login (POST)', () => {
    it('should login existing user', () => {
      return request(app.getHttpServer())
        .post('/auth/login')
        .send({
          email: 'test@example.com',
          password: 'password123'
        })
        .expect(200)
        .expect((res) => {
          expect(res.body.access_token).toBeDefined();
        });
    });

    it('should reject invalid credentials', () => {
      return request(app.getHttpServer())
        .post('/auth/login')
        .send({
          email: 'test@example.com',
          password: 'wrongpassword'
        })
        .expect(401);
    });
  });
});
```

#### Example: AI API E2E Test
```typescript
// test/ai.e2e-spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from '../src/app.module';

describe('AI API (e2e)', () => {
  let app: INestApplication;
  let authToken: string;

  beforeEach(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    await app.init();

    // Get auth token for testing
    const loginResponse = await request(app.getHttpServer())
      .post('/auth/login')
      .send({
        email: 'test@example.com',
        password: 'password123'
      });
    
    authToken = loginResponse.body.access_token;
  });

  afterAll(async () => {
    await app.close();
  });

  describe('/ai/analyze (POST)', () => {
    it('should analyze health data', () => {
      return request(app.getHttpServer())
        .post('/ai/analyze')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          focus_area: 'overall',
          time_period: 'current'
        })
        .expect(200)
        .expect((res) => {
          expect(res.body.analysis).toBeDefined();
        });
    });

    it('should require authentication', () => {
      return request(app.getHttpServer())
        .post('/ai/analyze')
        .send({
          focus_area: 'overall',
          time_period: 'current'
        })
        .expect(401);
    });
  });

  describe('/ai/chat/start (POST)', () => {
    it('should start chat session', () => {
      return request(app.getHttpServer())
        .post('/ai/chat/start')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          initial_message: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö'
        })
        .expect(201)
        .expect((res) => {
          expect(res.body.session_id).toBeDefined();
          expect(res.body.ai_response).toBeDefined();
        });
    });
  });
});
```

### Test Configuration

#### Jest Configuration (package.json)
```json
{
  "jest": {
    "moduleFileExtensions": ["js", "json", "ts"],
    "rootDir": "src",
    "testRegex": ".*\\.spec\\.ts$",
    "transform": {
      "^.+\\.(t|j)s$": "ts-jest"
    },
    "collectCoverageFrom": ["**/*.(t|j)s"],
    "coverageDirectory": "../coverage",
    "testEnvironment": "node"
  }
}
```

#### E2E Jest Configuration (test/jest-e2e.json)
```json
{
  "moduleFileExtensions": ["js", "json", "ts"],
  "rootDir": ".",
  "testEnvironment": "node",
  "testRegex": ".e2e-spec.ts$",
  "transform": {
    "^.+\\.(t|j)s$": "ts-jest"
  }
}
```

### Test Coverage

```bash
# ‡∏£‡∏±‡∏ô tests ‡∏û‡∏£‡πâ‡∏≠‡∏° coverage report
npm run test:cov

# ‡∏î‡∏π coverage report ‡πÉ‡∏ô browser
open coverage/lcov-report/index.html
```

**Coverage Goals:**
- **Statements**: 80%+
- **Branches**: 75%+
- **Functions**: 80%+
- **Lines**: 80%+

### Testing Best Practices

1. **Test Naming**: ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
2. **Arrange-Act-Assert**: ‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö test code ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
3. **Mocking**: Mock external dependencies ‡πÅ‡∏•‡∏∞ services
4. **Test Isolation**: ‡πÅ‡∏ï‡πà‡∏•‡∏∞ test ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¥‡∏™‡∏£‡∏∞‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô
5. **Edge Cases**: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡∏∞ boundary conditions
6. **Integration Tests**: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Ç‡∏≠‡∏á components

### Debugging Tests

```bash
# Debug unit tests
npm run test:debug

# Debug specific test file
npm run test -- --testNamePattern="should register new user"

# Run tests with verbose output
npm run test -- --verbose
```

### Continuous Integration

```yaml
# .github/workflows/test.yml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run test
      - run: npm run test:e2e
      - run: npm run test:cov
```

## üîí Security Features

- **JWT Authentication**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏î‡πâ‡∏ß‡∏¢ JWT tokens
- **Route Guards**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á API ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï
- **Input Validation**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
- **Rate Limiting**: ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
- **CORS Configuration**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡πÇ‡∏î‡πÄ‡∏°‡∏ô

## üìö Documentation

- **API Documentation**: `AI_API_ENDPOINTS.md`
- **Implementation Summary**: `AI_API_IMPLEMENTATION_SUMMARY.md`
- **Database Schema**: `‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô ‡πÄ‡∏à‡∏Ñ‡∏à‡∏ö.txt`

## üõ†Ô∏è Technologies Used

- **Backend Framework**: NestJS
- **Language**: TypeScript
- **Database**: Supabase (PostgreSQL)
- **Authentication**: JWT
- **AI Integration**: OpenRouter API
- **API Documentation**: OpenAPI/Swagger
- **Testing**: Jest
- **Package Manager**: npm

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üÜò Support

‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠:

- ‡∏™‡∏£‡πâ‡∏≤‡∏á Issue ‡πÉ‡∏ô GitHub repository
- ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏ó‡∏µ‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤
- ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `docs/`

## üéØ Roadmap

- [ ] Real-time AI analysis
- [ ] Predictive health analytics
- [ ] Voice chat integration
- [ ] Image analysis for food logging
- [ ] Multi-language support
- [ ] Mobile app integration
- [ ] Advanced health metrics
- [ ] Social features

---

<p align="center">
  <strong>Built with ‚ù§Ô∏è using NestJS</strong>
</p>
