### Water Log Statistics API Test - FIXED VERSION
### ทดสอบ Water Log Statistics API ที่แก้ไขแล้ว

@base_url = http://localhost:3000
@jwt_token = your_jwt_token_here

### ============================================
### 1. LOGIN - Get JWT Token
### ============================================

POST {{base_url}}/auth/login
Content-Type: application/json

{
  "email": "ppansiun@outlook.com",
  "password": "adwawdasd"
}

### ============================================
### 2. SET DAILY WATER GOAL
### ============================================

POST {{base_url}}/water-logs/goals/daily
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "daily_goal_ml": 2000,
  "notes": "Recommended daily intake for testing"
}

### ============================================
### 3. CREATE SAMPLE WATER LOGS FOR 2024-01-15
### ============================================

### Morning Water - 2024-01-15
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "water",
  "notes": "Morning hydration",
  "consumed_at": "2024-01-15T07:00:00Z"
}

### Morning Coffee - 2024-01-15
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "coffee",
  "notes": "Morning coffee",
  "consumed_at": "2024-01-15T08:30:00Z"
}

### Lunch Water - 2024-01-15
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Lunch water",
  "consumed_at": "2024-01-15T12:00:00Z"
}

### Afternoon Water - 2024-01-15
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 400,
  "drink_type": "water",
  "notes": "Afternoon hydration",
  "consumed_at": "2024-01-15T15:30:00Z"
}

### Evening Water - 2024-01-15
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "water",
  "notes": "Evening water",
  "consumed_at": "2024-01-15T19:00:00Z"
}

### ============================================
### 4. CREATE SAMPLE WATER LOGS FOR 2024-01-14
### ============================================

### Morning Water - 2024-01-14
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Morning water",
  "consumed_at": "2024-01-14T08:00:00Z"
}

### Green Tea - 2024-01-14
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 150,
  "drink_type": "tea",
  "notes": "Green tea",
  "consumed_at": "2024-01-14T10:30:00Z"
}

### Lunch Water - 2024-01-14
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 350,
  "drink_type": "water",
  "notes": "Lunch water",
  "consumed_at": "2024-01-14T12:30:00Z"
}

### Afternoon Water - 2024-01-14
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "water",
  "notes": "Afternoon water",
  "consumed_at": "2024-01-14T16:00:00Z"
}

### ============================================
### 5. CREATE SAMPLE WATER LOGS FOR 2024-01-13
### ============================================

### Morning Water - 2024-01-13
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 400,
  "drink_type": "water",
  "notes": "Morning hydration",
  "consumed_at": "2024-01-13T07:30:00Z"
}

### Morning Coffee - 2024-01-13
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "coffee",
  "notes": "Morning coffee",
  "consumed_at": "2024-01-13T09:00:00Z"
}

### Large Bottle - 2024-01-13
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 500,
  "drink_type": "water",
  "notes": "Large bottle",
  "consumed_at": "2024-01-13T14:00:00Z"
}

### Evening Water - 2024-01-13
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Evening water",
  "consumed_at": "2024-01-13T18:30:00Z"
}

### ============================================
### 6. CREATE SAMPLE WATER LOGS FOR 2024-01-12
### ============================================

### Morning Water - 2024-01-12
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "water",
  "notes": "Morning water",
  "consumed_at": "2024-01-12T08:00:00Z"
}

### Mid-morning - 2024-01-12
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Mid-morning",
  "consumed_at": "2024-01-12T11:00:00Z"
}

### Lunch Water - 2024-01-12
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 400,
  "drink_type": "water",
  "notes": "Lunch water",
  "consumed_at": "2024-01-12T13:00:00Z"
}

### Afternoon - 2024-01-12
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "water",
  "notes": "Afternoon",
  "consumed_at": "2024-01-12T15:30:00Z"
}

### Evening - 2024-01-12
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "water",
  "notes": "Evening",
  "consumed_at": "2024-01-12T19:00:00Z"
}

### ============================================
### 7. CREATE SAMPLE WATER LOGS FOR 2024-01-11
### ============================================

### Morning Water - 2024-01-11
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 350,
  "drink_type": "water",
  "notes": "Morning hydration",
  "consumed_at": "2024-01-11T07:00:00Z"
}

### Coffee Break - 2024-01-11
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "coffee",
  "notes": "Coffee break",
  "consumed_at": "2024-01-11T10:00:00Z"
}

### Lunch Water - 2024-01-11
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 450,
  "drink_type": "water",
  "notes": "Lunch water",
  "consumed_at": "2024-01-11T12:30:00Z"
}

### Afternoon - 2024-01-11
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Afternoon",
  "consumed_at": "2024-01-11T16:00:00Z"
}

### ============================================
### 8. CREATE SAMPLE WATER LOGS FOR 2024-01-10
### ============================================

### Morning Water - 2024-01-10
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "water",
  "notes": "Morning water",
  "consumed_at": "2024-01-10T08:00:00Z"
}

### Herbal Tea - 2024-01-10
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "tea",
  "notes": "Herbal tea",
  "consumed_at": "2024-01-10T10:30:00Z"
}

### Lunch Water - 2024-01-10
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 400,
  "drink_type": "water",
  "notes": "Lunch water",
  "consumed_at": "2024-01-10T12:00:00Z"
}

### Afternoon Hydration - 2024-01-10
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 350,
  "drink_type": "water",
  "notes": "Afternoon hydration",
  "consumed_at": "2024-01-10T15:00:00Z"
}

### Evening Water - 2024-01-10
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "water",
  "notes": "Evening water",
  "consumed_at": "2024-01-10T18:00:00Z"
}

### ============================================
### 9. CREATE SAMPLE WATER LOGS FOR 2024-01-09
### ============================================

### Morning Water - 2024-01-09
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Morning water",
  "consumed_at": "2024-01-09T07:30:00Z"
}

### Morning Coffee - 2024-01-09
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "coffee",
  "notes": "Morning coffee",
  "consumed_at": "2024-01-09T09:00:00Z"
}

### Large Bottle - 2024-01-09
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 500,
  "drink_type": "water",
  "notes": "Large bottle",
  "consumed_at": "2024-01-09T13:00:00Z"
}

### Afternoon - 2024-01-09
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Afternoon",
  "consumed_at": "2024-01-09T16:30:00Z"
}

### ============================================
### 10. CREATE SAMPLE WATER LOGS FOR 2024-01-08
### ============================================

### Morning Water - 2024-01-08
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 400,
  "drink_type": "water",
  "notes": "Morning hydration",
  "consumed_at": "2024-01-08T08:00:00Z"
}

### Mid-morning - 2024-01-08
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 200,
  "drink_type": "water",
  "notes": "Mid-morning",
  "consumed_at": "2024-01-08T11:00:00Z"
}

### Lunch Water - 2024-01-08
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 350,
  "drink_type": "water",
  "notes": "Lunch water",
  "consumed_at": "2024-01-08T12:30:00Z"
}

### Afternoon - 2024-01-08
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 250,
  "drink_type": "water",
  "notes": "Afternoon",
  "consumed_at": "2024-01-08T15:00:00Z"
}

### Evening Water - 2024-01-08
POST {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}
Content-Type: application/json

{
  "amount_ml": 300,
  "drink_type": "water",
  "notes": "Evening water",
  "consumed_at": "2024-01-08T18:30:00Z"
}

### ============================================
### 11. TEST STATISTICS ENDPOINTS (FIXED)
### ============================================

### Test Daily Stats - 2024-01-15 (SHOULD WORK NOW!)
GET {{base_url}}/water-logs/stats/daily?date=2024-01-15
Authorization: Bearer {{jwt_token}}

### Test Weekly Stats - 2024-01-08 to 2024-01-14 (SHOULD WORK NOW!)
GET {{base_url}}/water-logs/stats/weekly?start_date=2024-01-08&end_date=2024-01-14
Authorization: Bearer {{jwt_token}}

### Test Today's Progress
GET {{base_url}}/water-logs/progress/today
Authorization: Bearer {{jwt_token}}

### Test Daily Goal
GET {{base_url}}/water-logs/goals/daily
Authorization: Bearer {{jwt_token}}

### Test Water Consumption Trends
GET {{base_url}}/water-logs/trends/consumption?days=30
Authorization: Bearer {{jwt_token}}

### Test Hydration Insights
GET {{base_url}}/water-logs/insights/hydration
Authorization: Bearer {{jwt_token}}

### ============================================
### 12. VERIFY DATA CREATION
### ============================================

### Get All Water Logs
GET {{base_url}}/water-logs
Authorization: Bearer {{jwt_token}}

### Get Water Logs for 2024-01-15
GET {{base_url}}/water-logs?start_date=2024-01-15&end_date=2024-01-15
Authorization: Bearer {{jwt_token}}

### ============================================
### 13. ADDITIONAL STATISTICS TESTS
### ============================================

### Test Daily Stats for different dates
GET {{base_url}}/water-logs/stats/daily?date=2024-01-14
Authorization: Bearer {{jwt_token}}

GET {{base_url}}/water-logs/stats/daily?date=2024-01-13
Authorization: Bearer {{jwt_token}}

GET {{base_url}}/water-logs/stats/daily?date=2024-01-12
Authorization: Bearer {{jwt_token}}

### Test Weekly Stats for different periods
GET {{base_url}}/water-logs/stats/weekly?start_date=2024-01-10&end_date=2024-01-16
Authorization: Bearer {{jwt_token}}

GET {{base_url}}/water-logs/stats/weekly?start_date=2024-01-01&end_date=2024-01-07
Authorization: Bearer {{jwt_token}}
