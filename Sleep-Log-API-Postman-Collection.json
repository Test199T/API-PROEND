{
  "info": {
    "name": "Sleep Log API Collection",
    "description": "Complete collection for testing Sleep Log API endpoints",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_email",
      "value": "your-email@example.com",
      "type": "string"
    },
    {
      "key": "user_password",
      "value": "your-password",
      "type": "string"
    },
    {
      "key": "sleep_log_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Public Endpoints",
      "item": [
        {
          "name": "Test Public Endpoint",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/test/public",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "test", "public"]
            }
          },
          "response": []
        },
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/test/health-check",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "test", "health-check"]
            }
          },
          "response": []
        },
        {
          "name": "Get Sample Data",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/test/sample-data",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "test", "sample-data"]
            }
          },
          "response": []
        },
        {
          "name": "Create Sample Data",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/sleep-log/test/create-sample",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "test", "create-sample"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.access_token) {",
                  "        pm.collectionVariables.set('jwt_token', response.access_token);",
                  "        console.log('JWT token saved:', response.access_token);",
                  "    } else if (response.data && response.data.access_token) {",
                  "        pm.collectionVariables.set('jwt_token', response.data.access_token);",
                  "        console.log('JWT token saved:', response.data.access_token);",
                  "    }",
                  "} else {",
                  "    console.log('Login failed:', pm.response.text());",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{user_email}}\",\n  \"password\": \"{{user_password}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Sleep Log CRUD",
      "item": [
        {
          "name": "Create Sleep Log",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.id) {",
                  "        pm.collectionVariables.set('sleep_log_id', response.data.id);",
                  "        console.log('Sleep log ID saved:', response.data.id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sleep_date\": \"2024-01-15\",\n  \"bedtime\": \"22:30:00\",\n  \"wake_time\": \"06:30:00\",\n  \"sleep_duration_hours\": 8,\n  \"sleep_quality\": \"good\",\n  \"sleep_efficiency_percentage\": 85,\n  \"time_to_fall_asleep_minutes\": 15,\n  \"awakenings_count\": 1,\n  \"deep_sleep_minutes\": 120,\n  \"light_sleep_minutes\": 300,\n  \"rem_sleep_minutes\": 90,\n  \"awake_minutes\": 30,\n  \"heart_rate_avg\": 65,\n  \"heart_rate_min\": 55,\n  \"heart_rate_max\": 75,\n  \"oxygen_saturation_avg\": 98,\n  \"room_temperature_celsius\": 22,\n  \"noise_level_db\": 35,\n  \"light_level_lux\": 5,\n  \"caffeine_intake_mg\": 0,\n  \"alcohol_intake_ml\": 0,\n  \"exercise_before_bed_hours\": 3,\n  \"screen_time_before_bed_minutes\": 30,\n  \"sleep_aids_used\": [],\n  \"medications_taken\": [],\n  \"stress_level\": 3,\n  \"mood_before_sleep\": 7,\n  \"mood_after_wake\": 8,\n  \"energy_level\": 8,\n  \"notes\": \"นอนหลับได้ดี ตื่นขึ้นมาสดชื่น\",\n  \"dreams_remembered\": true,\n  \"nightmares\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/sleep-log",
              "host": ["{{base_url}}"],
              "path": ["sleep-log"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Sleep Logs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["sleep-log"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Sleep Log by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/{{sleep_log_id}}",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "{{sleep_log_id}}"]
            }
          },
          "response": []
        },
        {
          "name": "Update Sleep Log",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sleep_quality\": \"excellent\",\n  \"sleep_efficiency_percentage\": 90,\n  \"time_to_fall_asleep_minutes\": 10,\n  \"awakenings_count\": 0,\n  \"notes\": \"นอนหลับลึกมาก รู้สึกสดชื่นมาก\",\n  \"mood_after_wake\": 9,\n  \"energy_level\": 9\n}"
            },
            "url": {
              "raw": "{{base_url}}/sleep-log/{{sleep_log_id}}",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "{{sleep_log_id}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Sleep Log",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/{{sleep_log_id}}",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "{{sleep_log_id}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Search & Filter",
      "item": [
        {
          "name": "Search by Sleep Quality",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/search/quality/good",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "search", "quality", "good"]
            }
          },
          "response": []
        },
        {
          "name": "Search by Sleep Duration",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/search/duration/7/9",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "search", "duration", "7", "9"]
            }
          },
          "response": []
        },
        {
          "name": "Search by Date Range",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/search/date-range?from=2024-01-01&to=2024-01-31",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "search", "date-range"],
              "query": [
                {
                  "key": "from",
                  "value": "2024-01-01"
                },
                {
                  "key": "to",
                  "value": "2024-01-31"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Advanced Search",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log?sleep_quality=good&min_sleep_duration=7&max_sleep_duration=9&sleep_date_from=2024-01-01&sleep_date_to=2024-01-31&search=สดชื่น&page=1&limit=5",
              "host": ["{{base_url}}"],
              "path": ["sleep-log"],
              "query": [
                {
                  "key": "sleep_quality",
                  "value": "good"
                },
                {
                  "key": "min_sleep_duration",
                  "value": "7"
                },
                {
                  "key": "max_sleep_duration",
                  "value": "9"
                },
                {
                  "key": "sleep_date_from",
                  "value": "2024-01-01"
                },
                {
                  "key": "sleep_date_to",
                  "value": "2024-01-31"
                },
                {
                  "key": "search",
                  "value": "สดชื่น"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Statistics & Analytics",
      "item": [
        {
          "name": "Get Sleep Statistics Overview",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/stats/overview",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "stats", "overview"]
            }
          },
          "response": []
        },
        {
          "name": "Get Sleep Statistics for Specific Date",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/stats/overview?date=2024-01-15",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "stats", "overview"],
              "query": [
                {
                  "key": "date",
                  "value": "2024-01-15"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Sleep Trends (7 days)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/trends?days=7",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "trends"],
              "query": [
                {
                  "key": "days",
                  "value": "7"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Sleep Trends (30 days)",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/trends?days=30",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "trends"],
              "query": [
                {
                  "key": "days",
                  "value": "30"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Sleep Analysis",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/analysis?days=30",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "analysis"],
              "query": [
                {
                  "key": "days",
                  "value": "30"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Sleep Recommendations",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/sleep-log/recommendations",
              "host": ["{{base_url}}"],
              "path": ["sleep-log", "recommendations"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Sample Data Creation",
      "item": [
        {
          "name": "Create Multiple Sleep Logs",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sleep_date\": \"2024-01-14\",\n  \"bedtime\": \"23:00\",\n  \"wake_time\": \"07:00\",\n  \"sleep_duration_hours\": 8,\n  \"sleep_quality\": \"excellent\",\n  \"sleep_efficiency_percentage\": 90,\n  \"time_to_fall_asleep_minutes\": 10,\n  \"awakenings_count\": 0,\n  \"deep_sleep_minutes\": 140,\n  \"light_sleep_minutes\": 280,\n  \"rem_sleep_minutes\": 100,\n  \"awake_minutes\": 20,\n  \"heart_rate_avg\": 62,\n  \"heart_rate_min\": 52,\n  \"heart_rate_max\": 72,\n  \"oxygen_saturation_avg\": 98,\n  \"room_temperature_celsius\": 21,\n  \"noise_level_db\": 30,\n  \"light_level_lux\": 3,\n  \"caffeine_intake_mg\": 0,\n  \"alcohol_intake_ml\": 0,\n  \"exercise_before_bed_hours\": 4,\n  \"screen_time_before_bed_minutes\": 15,\n  \"sleep_aids_used\": [],\n  \"medications_taken\": [],\n  \"stress_level\": 2,\n  \"mood_before_sleep\": 8,\n  \"mood_after_wake\": 9,\n  \"energy_level\": 9,\n  \"notes\": \"นอนหลับลึกมาก รู้สึกสดชื่นมาก\",\n  \"dreams_remembered\": true,\n  \"nightmares\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/sleep-log",
              "host": ["{{base_url}}"],
              "path": ["sleep-log"]
            }
          },
          "response": []
        },
        {
          "name": "Create Poor Sleep Log",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{jwt_token}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"sleep_date\": \"2024-01-13\",\n  \"bedtime\": \"01:00\",\n  \"wake_time\": \"08:00\",\n  \"sleep_duration_hours\": 7,\n  \"sleep_quality\": \"fair\",\n  \"sleep_efficiency_percentage\": 75,\n  \"time_to_fall_asleep_minutes\": 30,\n  \"awakenings_count\": 3,\n  \"deep_sleep_minutes\": 90,\n  \"light_sleep_minutes\": 320,\n  \"rem_sleep_minutes\": 70,\n  \"awake_minutes\": 60,\n  \"heart_rate_avg\": 70,\n  \"heart_rate_min\": 60,\n  \"heart_rate_max\": 80,\n  \"oxygen_saturation_avg\": 97,\n  \"room_temperature_celsius\": 25,\n  \"noise_level_db\": 50,\n  \"light_level_lux\": 20,\n  \"caffeine_intake_mg\": 200,\n  \"alcohol_intake_ml\": 100,\n  \"exercise_before_bed_hours\": 1,\n  \"screen_time_before_bed_minutes\": 120,\n  \"sleep_aids_used\": [],\n  \"medications_taken\": [],\n  \"stress_level\": 7,\n  \"mood_before_sleep\": 4,\n  \"mood_after_wake\": 5,\n  \"energy_level\": 4,\n  \"notes\": \"เข้านอนดึก ตื่นกลางคืนหลายครั้ง\",\n  \"dreams_remembered\": false,\n  \"nightmares\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/sleep-log",
              "host": ["{{base_url}}"],
              "path": ["sleep-log"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
